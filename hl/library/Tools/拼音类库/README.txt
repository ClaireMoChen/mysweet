此函数非常简单，没有使用正则表达式和转码函数，只使用了简单的数组遍历，在兼容性和性能方面都比较好吧。

pinyin.php 共25961字，包括 20902个基本汉字（Unicode码0x4e00-0x9fa5）和 6582个汉字（Unicode码0x3400-0x4db5，只收集到其中5059生僻字的拼音，微软全拼码表中不包含这5059个生僻字。相比我之前发的 PHP汉字转拼音类（http://www.oschina.net/code/snippet_862384_25392） 全太多，这个类只支持3755字。）

pinyin_gbk.php 共20902字，不过好像有100多字在GBK下不支持。

pinyin_ms.php 共27900字（重复6998个多音字，实际字数20902个），拼音库来源于windosw系统自带全拼码表（虽然还可以收集一下其他拼音输入法码表，可能更多字数，但我觉得微软的字库比较权威，同时20902个汉字已经能满足常用汉字的所有需求了，字库越大程序性能越低。）

pinyin_mini.php 只支持3755字，如果是UTF-8，需要使用 iconv 转码，优点文件小，速度快。

性能测试如下：
pinyin.php 这函数我本机测试执行时间在0.04左右，如果把汉字转拼音库直接改成数组，可以提高0.03秒，不过文件要大一半，在意执行时间，不在意文件大小的，可以自己改一下。
pinyin_mini.php 执行时间比较快，大概在0.004秒左右，比这个大库快10倍。在意性能，对拼音库要求不高的朋友可以使用这个类。

为考虑程序性能，没有考虑支持多音字，我个人觉得也没有必要牺牲更多性能去支持多音字。如果喜欢折腾这个问题的朋友，可以下载uniku.zip、TableTextServiceSimplifiedQuanPin.zip，里面有我收集的一些词库，对解决多音字问题应该有帮助。